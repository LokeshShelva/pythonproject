{% extends "main/base.html" %}
{% load static %}

{% block title %} DataViz | Dashboard {% endblock title %}
{% block style %}
<link rel="stylesheet" href="{% static 'main/styles/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'main/styles/site-header.css' %}">
{% endblock style %}

{% block content %}
<div class="wrapper">
    <header class="site-header">
        <div class="content-wrapper">
            <div class="header-content">
                <div class="header-title">
                    <div class="site-logo">
                        <svg enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                            <path d="m57.302 227.714c-7.811-7.811-7.811-20.475 0-28.285l117.099-117.099c7.811-7.809 20.474-7.811 28.284 0l73.628 73.628 115.958-115.958h-51.376c-11.046 0-20-8.954-20-20s8.954-20 20-20h99.65c11.225-.006 20.01 9.171 20.01 20v99.66c0 11.046-8.954 20-20 20s-20-8.954-20-20v-51.375l-130.1 130.1c-7.811 7.811-20.474 7.811-28.284 0l-73.628-73.628-102.957 102.957c-7.81 7.811-20.475 7.809-28.284 0zm85.587 146.286v118c0 11.046-8.954 20-20 20h-102.889c-11.046 0-20-8.954-20-20v-118c0-11.046 8.954-20 20-20h102.889c11.046 0 20 8.954 20 20zm-40 20h-62.889v78h62.889zm224.555-96.074v194.074c0 11.046-8.954 20-20 20h-102.888c-11.046 0-20-8.954-20-20v-194.074c0-11.046 8.954-20 20-20h102.889c11.045 0 19.999 8.954 19.999 20zm-40 20h-62.889v154.074h62.889zm224.556-96.073v270.147c0 11.046-8.954 20-20 20h-102.889c-11.046 0-20-8.954-20-20v-270.147c0-11.046 8.954-20 20-20h102.889c11.046 0 20 8.954 20 20zm-40 20h-62.889v230.147h62.889z"/>
                        </svg>
                    </div>
                    <h3 class="app-name">DataViz</h3>
                    <span>| Dashboard</span>
                </div>
                <div class="gap"></div>
                <div class="action-btns">
                    <div class="logout-btn">
                        <button class="btn filled-btn icon-btn logout-btn" onclick="location.href='/auth/signout'">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <title>ic_exit_to_app_24px</title>
                                <g>
                                    <path
                                        d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z">
                                    </path>
                                </g>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="content-wrapper">
            <div class="section-header">
                <h4 class="section-title">Your Graphs</h4>
                <div class="gap"></div>
                <div class="dropdown">
                    <button class="btn borderless-btn icon-btn" id="dropdown-btn" onclick="create()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <title>ic_add_24px</title>
                            <g>
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
                            </g>
                        </svg>
                        Create
                    </button>
                    <div class="dropdown-content">
                        <a href="/create?graph-type=bargraph">Bar Graph</a>
                        <a href="/create?graph-type=compoundbargraph">Compound Bar Chart</a>
                        <a href="/create?graph-type=linegraph">Line Graph</a>
                        <a href="/create?graph-type=piechart">Pie Chart</a>
                        <a href="/create?graph-type=scatterplot">Scatter Plot</a>
                    </div>
                </div>
            </div>
            <div class="grid-view">
                {% for plot in plots %}
                {% if plot.type == "B" or plot.type == "C" %}
                <div class="card-container">
                    <div id="{{ plot.id }}" class="card"
                        onclick="location.href = `/create?graph-type=bargraph&id=${event.currentTarget.id}`">
                        <div class="image-container">
                            <img src="{% static 'main/bar-graph.svg' %}">
                        </div>
                        <div class="graph-name">{{ plot.name }}</div>
                    </div>
                </div>
                {% elif plot.type == "P" %}
                <div id="{{ plot.id }}" class="card-container"
                    onclick="location.href = `/create?graph-type=piechart&id=${event.currentTarget.id}`">
                    <div class="card">
                        <div class="image-container">
                            <img src="{% static 'main/pie-chart.svg' %}">
                        </div>
                        <div class="graph-name">{{ plot.name }}</div>
                    </div>
                </div>
                {% elif plot.type == "L" %}
                <div id="{{ plot.id }}" class="card-container"
                    onclick="location.href = `/create?graph-type=linegraph&id=${event.currentTarget.id}`">
                    <div class="card">
                        <div class="image-container">
                            <img src="{% static 'main/line-chart.svg' %}">
                        </div>
                        <div class="graph-name">{{ plot.name }}</div>
                    </div>
                </div>
                {% elif plot.type == "S" %}
                <div id="{{ plot.id }}" class="card-container"
                    onclick="location.href = `/create?graph-type=scatterplot&id=${event.currentTarget.id}`">
                    <div class="card">
                        <div class="image-container">
                            <img src="{% static 'main/chart.svg' %}">
                        </div>
                        <div class="graph-name">{{ plot.name }}</div>
                    </div>
                </div>
                {% endif %}
                {% empty %}
                <span class="text">No Plots... Create new plot</span>
                {% endfor %}
            </div>
        </div>
    </main>
</div>
<script>
    function create() {
        document.querySelector(".dropdown-content").classList.toggle("show")
    }

    window.onclick = function (event) {
        if (!event.target.matches('#dropdown-btn')) {
            let dropdowns = document.getElementsByClassName("dropdown-content");
            let i;
            for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }
</script>
{% endblock content %}